!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ClockWorks=t()}(this,function(){function e(){var e={};function t(t,s){return clearInterval(e[t.name]),e[t.name]=setInterval(function(){postMessage({type:"TIMER",timer:t})},t.time),!0}onmessage=function(s){switch(s.data||postMessage(null),s.data.type){case"TIMER":t(s.data.timer),postMessage({type:"STATUS",message:"Okay"});break;case"LIST":r=s.data.timers,(r=Array.isArray(r)?r:[r]).forEach(function(e,s){t(e)}),postMessage({type:"STATUS",message:"Okay"});break;case"REMOVE":clearInterval(e[s.data.timer.name]);break;default:console.log(s)}var r}}return function(){function t(e){return void 0===e&&(e=[]),this.version="0.1.0",this.timers=e,window.Worker?this.startWorker():this.spawnLocalTimers(e),this}var s=t.prototype;return s.push=function(e){var t=this.timers.push(e);return this.worker.postMessage({type:"TIMER",timer:{name:e.name,time:e.time,index:t-1}}),t},s.pull=function(e){if(!(e instanceof Object))throw new Error("timer needs to be an object to be able to remove");this.timers=this.timers.filter(function(t,s){return t.name!=e.name}),this.worker.postMessage({type:"REMOVE",timer:{name:e.name}})},s.startWorker=function(){var t=new Blob(["("+e.toString()+")();"],{type:"text/javascript"});if(this.worker=new Worker(window.URL.createObjectURL(t)),this.worker.onmessage=this.handleWorkerMessages.bind(this),this.timers.length>=1){var s=this.timers.reduce(function(e,t,s){return e.push({name:t.name,time:t.time,index:s}),e},[]);this.worker.postMessage({type:"LIST",timers:s})}},s.handleWorkerMessages=function(e){if(e.data)switch(e.data.type){case"STATUS":console.log(e.data.message);break;case"TIMER":var t=e.data.timer.index;try{this.timers[t].callback(e.data)}catch(e){console.error(e)}break;default:console.debug(e.data)}else console.debug("Worker sending blank messages...")},s.spawnLocalTimers=function(e){},t}()});
//# sourceMappingURL=clockworks.min.js.map
